services:
  - type: web
    name: fokal-static-site
    runtime: static
    buildCommand: echo "No build needed for static site"
    staticPublishPath: ./
    envVars:
      - key: NODE_VERSION
        value: 18
    headers:
      - path: /*
        name: X-Frame-Options
        value: DENY
      - path: /*
        name: X-Content-Type-Options
        value: nosniff
      - path: /*
        name: X-XSS-Protection
        value: 1; mode=block
      - path: /*
        name: Referrer-Policy
        value: strict-origin-when-cross-origin
      - path: /*
        name: Strict-Transport-Security
        value: max-age=31536000; includeSubDomains
      - path: /*
        name: Permissions-Policy
        value: geolocation=(), microphone=(), camera=()
      - path: /*
        name: Content-Security-Policy
        value: default-src 'self'; script-src 'self' 'unsafe-inline' https://www.googletagmanager.com https://www.google-analytics.com; style-src 'self' 'unsafe-inline' https://fonts.googleapis.com; font-src 'self' https://fonts.gstatic.com; img-src 'self' data: https:; connect-src 'self' https://backend.fokal.com https://www.google-analytics.com; frame-ancestors 'none'
    routes:
      - type: rewrite
        source: /
        destination: /index.html
      - type: rewrite
        source: /about
        destination: /about.html
      - type: rewrite
        source: /features
        destination: /features.html
      - type: rewrite
        source: /pricing
        destination: /pricing.html
      # NOTE: Topic hub routes are configured as proxy rules in Render Dashboard,
      # pointing to backend.fokal.com/render/*
      #
      # Required proxy rules:
      #   /resources   → backend.fokal.com/render/resources
      #   /ai-search   → backend.fokal.com/render/ai-search
      #   /ai-search/* → backend.fokal.com/render/ai-search/*
      #   /geo         → backend.fokal.com/render/geo
      #   /geo/*       → backend.fokal.com/render/geo/*
      #   /brand-visibility   → backend.fokal.com/render/brand-visibility
      #   /brand-visibility/* → backend.fokal.com/render/brand-visibility/*
      #   /seo         → backend.fokal.com/render/seo
      #   /seo/*       → backend.fokal.com/render/seo/*
      - type: rewrite
        source: /privacy-policy
        destination: /privacy-policy.html
      - type: rewrite
        source: /terms-and-conditions
        destination: /terms-and-conditions.html
      - type: rewrite
        source: /terms-of-use
        destination: /terms-of-use.html
      - type: rewrite
        source: /customer-agreement
        destination: /customer-agreement.html
      - type: rewrite
        source: /companies
        destination: /companies.html
      - type: rewrite
        source: /contact
        destination: /contact.html
      - type: rewrite
        source: /events/ai-search-roundtable
        destination: /events/ai-search-roundtable.html
      - type: rewrite
        source: /resources/australian-ai-geo-tactic
        destination: /resources/australian-ai-geo-tactic.html
      - type: rewrite
        source: /visibility-gaps
        destination: /visibility-gaps.html
      # 301 Redirects: Old research URLs to new /ai-seo-research/ structure
      - type: redirect
        source: /insights
        destination: /ai-seo-research
        status: 301
      - type: redirect
        source: /ai-search-compensation
        destination: /ai-seo-research/openai-salary
        status: 301
      - type: redirect
        source: /ai-search-conversions
        destination: /ai-seo-research/zero-click-search
        status: 301
      - type: redirect
        source: /google-vs-openai-search
        destination: /ai-seo-research/chatgpt-vs-google
        status: 301
      - type: redirect
        source: /ai-search-patents
        destination: /ai-seo-research/ai-search-patents
        status: 301
      - type: redirect
        source: /ai-search-consensus
        destination: /ai-seo-research/ai-search-consensus
        status: 301
      - type: redirect
        source: /llm-citation-selection
        destination: /ai-seo-research/ai-citations
        status: 301
      # AI SEO Research hub and articles (new structure)
      - type: rewrite
        source: /ai-seo-research
        destination: /ai-seo-research.html
      - type: rewrite
        source: /ai-seo-research/openai-salary
        destination: /ai-seo-research/openai-salary.html
      - type: rewrite
        source: /ai-seo-research/zero-click-search
        destination: /ai-seo-research/zero-click-search.html
      - type: rewrite
        source: /ai-seo-research/chatgpt-vs-google
        destination: /ai-seo-research/chatgpt-vs-google.html
      - type: rewrite
        source: /ai-seo-research/ai-search-patents
        destination: /ai-seo-research/ai-search-patents.html
      - type: rewrite
        source: /ai-seo-research/ai-search-consensus
        destination: /ai-seo-research/ai-search-consensus.html
      - type: rewrite
        source: /ai-seo-research/ai-citations
        destination: /ai-seo-research/ai-citations.html
